<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <title>Título da página</title>
    <meta charset="utf-8">
  </head>
  <body>
    <h1>Perfil do Usuário: 4</h1>
    <div id="profile"></div>
    <br>	
    <button id="button-ok" onclick="getUserProfile()">Enviar</button>
  </body> 
  
  <script>
  
  
    // URL da API
	const apiUrl = 'https://www.khanacademy.org/api/internal/user/profile?email=acassiasantosedukhan@gmail.com';

await fetch("https://www.khanacademy.org/api/internal/graphql/projectsAuthoredByUser", {
  "body": "{\"operationName\":\"projectsAuthoredByUser\",\"query\":\"query projectsAuthoredByUser($kaid: String, $pageInfo: ListProgramsPageInfo, $sort: ListProgramSortOrder) {\\n  user(kaid: $kaid) {\\n    id\\n    programs(pageInfo: $pageInfo, sort: $sort) {\\n      complete\\n      cursor\\n      programs {\\n        id\\n        key\\n        authorKaid\\n        authorNickname\\n        displayableSpinoffCount\\n        imagePath\\n        sumVotesIncremented\\n        translatedTitle: title\\n        url\\n        __typename\\n      }\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\",\"variables\":{\"kaid\":\"kaid_585930138674289802884730\",\"sort\":\"TOP\",\"pageInfo\":{\"cursor\":\"\",\"itemsPerPage\":40}}}",
  "method": "POST",
}).then(res => res.json())
	  
	  /*
  fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      // faça algo com os dados retornados
        console.log('ok');
        // Manipulando os dados recebidos da API
        const dataDiv = document.getElementById('profile');
        dataDiv.innerHTML = JSON.stringify(data, null, 2);	    
    })
    .catch(error => {
      // trate erros de requisição
	    console.log('erro');
    });
	*/  
	  /*
fetch(apiUrl)
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro ao acessar a API: ' + response.status);
        }
        return response.json();
    })
    .then(data => {
        // Manipulando os dados recebidos da API
        const dataDiv = document.getElementById('profile');
        dataDiv.innerHTML = JSON.stringify(data, null, 2);
    })
    .catch(error => {
        console.error('Erro:', error);
    });
  */
  
  /*
  
	// URL da API
	const apiUrl = 'https://www.khanacademy.org/api/internal/user/profile?email=acassiasantosedukhan@gmail.com';

	// Fazendo a requisição GET usando Fetch
	fetch(apiUrl)
		.then(response => {
			if (!response.ok) {
				throw new Error('Erro ao acessar a API: ' + response.status);
			}
			return response.json();
		})
		.then(data => {
			// Manipulando os dados recebidos da API
			const dataDiv = document.getElementById('data');
			dataDiv.innerHTML = JSON.stringify(data, null, 2);
		})
		.catch(error => {
			console.error('Erro:', error);
		});  
  */
  
  /*
	async function getUserProfile() {
	  // Monta a URL da API com o nome de usuário na query string
	  //const apiUrl = 'https://www.khanacademy.org/api/internal/user/profile?email=${email}';
	  const apiUrl = 'https://www.khanacademy.org/api/internal/user/profile?email=acassiasantosedukhan@gmail.com';

	  try {
		// Faz uma solicitação GET para a API
		const response = await fetch(apiUrl);

		// Verifica se a resposta foi bem-sucedida
		if (!response.ok) {
		  throw new Error(`Erro ao buscar o perfil do usuário: ${response.status}`);
		}

		// Converte a resposta para JSON
		const userProfile = await response.json();

		// Exibe ou retorna o JSON do perfil do usuário
		console.log(userProfile);
		return userProfile;

	  } catch (error) {
		console.error('Erro:', error);
	  }
	}	
*/
	
  </script>  
  
</html>
